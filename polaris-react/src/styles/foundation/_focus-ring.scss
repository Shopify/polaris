/// Sets the focus ring for an interactive element
/// @param {String} $size - The size of the border radius on the focus ring.
/// @param {String} $style - Focus ring state.
/// @param {Number} $border-width - Optional negative offset (can be used to ensure the outline wraps the border).
///

@mixin focus-ring($size: 'base', $border-width: 0, $style: 'base') {
  $stroke: 2px;
  // calc does not like performing addition with a unitless number (`0`, NOT `0px`) This makes sure that we can handle unitless zeros by not trying to do math with them.
  $offset: if($border-width == 0, 1px, calc(#{$border-width} + 1px));
  $border-radius: if(
    $size == 'wide',
    var(--p-border-radius-2),
    var(--p-border-radius-1)
  );
  $negative-offset: calc(-1 * #{$offset});

  @if $style == 'base' {
    position: relative;

    &::after {
      content: '';
      position: absolute;
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      z-index: 1;
      top: $negative-offset;
      right: $negative-offset;
      bottom: $negative-offset;
      left: $negative-offset;
      display: block;
      pointer-events: none;
      box-shadow: 0
        0
        0
        $negative-offset
        var(--p-color-border-interactive-focus);
      border-radius: $border-radius;
      @content;
    }
  } @else if $style == 'focused' {
    &::after {
      box-shadow: 0 0 0 $stroke var(--p-color-border-interactive-focus);
      outline: var(--p-border-width-1) solid transparent;
      @content;
    }
  }
}

@mixin no-focus-ring {
  &::after {
    content: none;
  }
}

/// Sets the focus ring as an outline for an interactive element
/// @param {String} $offset - Space between the focus ring and the element. Takes a spacing token or '0'. Defaults to '05'.
/// @param {String} $radius - Border radius of the focus ring. Takes a border radius token. Defaults to border radius of element.
///

@mixin focus-ring-outline($offset: '05', $radius: null) {
  // stylelint-disable-next-line -- string interpolation for token
  $outline-offset: if($offset == '0', 0, var(--p-space-#{$offset}));
  outline: var(--p-border-width-2) solid var(--p-color-border-interactive-focus);
  outline-offset: $outline-offset;
  @if $radius {
    // stylelint-disable-next-line -- string interpolation for token
    border-radius: var(--p-border-radius-#{$radius});
  }
}
