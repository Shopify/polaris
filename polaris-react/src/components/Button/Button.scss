@import '../../styles/common';

.Button {
  // stylelint-disable -- Polaris component custom properties
  --pc-button-micro-min-height: var(--p-font-line-height-2);
  --pc-button-slim-min-height: var(--p-font-line-height-4);
  --pc-button-large-min-height: 44px;
  --pc-button-vertical-padding: calc(
    (36px - var(--p-font-line-height-2) - var(--p-space-05)) / 2
  );
  --pc-button-slim-vertical-padding: calc(
    (
        var(--pc-button-slim-min-height) - var(--p-font-line-height-2) -
          var(--p-space-05)
      ) / 2
  );
  --pc-button-large-vertical-padding: calc(
    (
        var(--pc-button-large-min-height) - var(--p-font-line-height-2) -
          var(--p-space-05)
      ) / 2
  );
  --pc-button-spinner-size: 20px;
  --pc-button-segment: 10;
  --pc-button-focused: 20;
  --pc-button-disclosure-icon-offset: -6px;
  // stylelint-enable
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  @include button-base;

  &.disabled {
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    @include base-button-disabled;
  }

  &.connectedDisclosure {
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    z-index: var(--pc-button-segment);
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;

    &::after {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

    &:focus {
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      z-index: var(--pc-button-focused);
    }
  }
}

.Content {
  font-size: var(--p-font-size-100);
  font-weight: var(--p-font-weight-medium);
  line-height: var(--p-font-line-height-1);
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  text-transform: initial;
  letter-spacing: initial;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 1px;
  min-height: 1px;

  .Button:not(.plain) & {
    width: 100%;
  }
}

.textAlignLeft {
  justify-content: flex-start;
  text-align: left;

  .Content {
    justify-content: flex-start;
  }
}

.textAlignStart {
  justify-content: flex-start;
  text-align: start;

  .Content {
    justify-content: flex-start;
  }
}

.textAlignCenter {
  justify-content: center;
  text-align: center;
}

.textAlignRight {
  justify-content: flex-end;
  text-align: right;

  .Content {
    justify-content: flex-end;
  }
}

.textAlignEnd {
  justify-content: flex-end;
  text-align: end;

  .Content {
    justify-content: flex-end;
  }
}

.Icon {
  // This compensates for the typical icon used in buttons being
  // inset within its bounding box.
  margin-left: calc(-1 * (var(--p-space-1)));

  &:last-child {
    // This compensates for the disclosure icon, which is substantially
    // inset within the viewbox
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    margin-right: var(--pc-button-disclosure-icon-offset);
    margin-left: var(--p-space-1);
  }

  // stylelint-disable-next-line selector-max-class, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
  .fullWidth.textAlignLeft &:last-child:not(:only-child) {
    margin-left: auto;
  }

  + *:not(.Icon) {
    margin-left: var(--p-space-1);
  }
}

.hidden {
  visibility: hidden;
}

.Spinner {
  position: absolute;
  top: 50%;
  left: 50%;
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  margin-top: calc(-1 * (var(--pc-button-spinner-size) / 2));
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  margin-left: calc(-1 * (var(--pc-button-spinner-size) / 2));
}

.primary,
.destructive,
.primaryPlain {
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  @include focus-ring($border-width: 0);
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  background: var(--pc-button-color);
  border-width: 0;
  border-color: transparent;
  box-shadow: var(--p-shadow-sm);
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  color: var(--pc-button-text);

  &:hover {
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    background: var(--pc-button-color-hover);
    border-color: transparent;
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    color: var(--pc-button-text);
  }

  &:focus {
    border-color: transparent;
    box-shadow: var(--p-shadow-sm);
  }

  &:active {
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    background: var(--pc-button-color-active);
    border-color: transparent;
    box-shadow: var(--p-shadow-sm);
  }

  &.pressed {
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    color: var(--pc-button-text);
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    background: var(--pc-button-color-depressed);
    border-color: transparent;
    box-shadow: var(--p-shadow-sm);

    &:hover,
    &:focus {
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      background: var(--pc-button-color-depressed);
      box-shadow: var(--p-shadow-sm);
    }
  }

  &.disabled {
    color: var(--p-color-text-disabled);
    box-shadow: none;
    border-color: transparent;

    svg {
      fill: var(--p-color-icon-disabled);
    }
  }
}

.primary {
  // stylelint-disable -- Polaris component custom properties
  --pc-button-color: var(--p-color-bg-primary);
  --pc-button-text: var(--p-color-text-on-color);
  --pc-button-color-hover: var(--p-color-bg-primary-hover);
  --pc-button-color-active: var(--p-color-bg-primary-active);
  --pc-button-color-depressed: var(--p-color-bg-primary-active);
  // stylelint-enable
  svg {
    fill: var(--p-color-icon-on-color);
  }

  &.disabled {
    background: var(--p-color-bg-disabled);
  }
}

.destructive {
  // stylelint-disable -- Polaris component custom properties
  --pc-button-color: var(--p-color-bg-critical-strong);
  --pc-button-text: var(--p-color-text-on-color);
  --pc-button-color-hover: var(--p-color-bg-critical-strong-hover);
  --pc-button-color-active: var(--p-color-bg-critical-strong-active);
  --pc-button-color-depressed: var(--p-color-bg-critical-strong-active);
  // stylelint-enable
  svg {
    fill: var(--p-color-icon-on-color);
  }

  &.disabled {
    background: var(--p-color-bg-disabled);
  }
}

.primaryPlain {
  // stylelint-disable -- Polaris component custom properties
  --pc-button-color: var(--p-color-bg-interactive-subdued-active);
  --pc-button-text: var(--p-color-text-interactive-hover);
  --pc-button-color-hover: var(--p-color-bg-interactive-subdued-active);
  --pc-button-color-active: var(--p-color-bg-interactive-subdued-active);
  --pc-button-color-depressed: var(--p-surface-selected-depressed);
  // stylelint-enable
  box-shadow: none;

  path {
    fill: var(--p-color-icon-on-color);
  }

  &:is(:hover, :focus, :active) {
    color: var(--p-color-text-interactive-active);
    box-shadow: none;
  }

  &.disabled {
    background: var(--p-color-bg-disabled);
  }
}

.outline {
  background: transparent;
  border: var(--p-border-width-1) solid var(--p-color-border);
  box-shadow: none;
  color: var(--p-color-text);
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  @include focus-ring($border-width: 1px);

  &:hover {
    border: var(--p-border-width-1) solid var(--p-color-border);
    box-shadow: none;
    background: var(--p-color-bg-hover);
  }

  &:focus-visible {
    border: var(--p-border-width-1) solid var(--p-color-border);
    box-shadow: none;
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    @include focus-ring($style: 'focused');
  }

  &:active {
    border: var(--p-border-width-1) solid var(--p-color-border);
    box-shadow: none;
    background: var(--p-color-bg-active);

    &::after {
      box-shadow: none;
    }
  }

  &.pressed {
    background: var(--p-color-bg-subdued-active);
    border: var(--p-border-width-1) solid var(--p-color-border);
    box-shadow: none;
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    color: var(--pc-button-text);
  }

  &.disabled {
    border: var(--p-border-width-1) solid var(--p-color-border-disabled);
    color: var(--p-color-text-disabled);
    background: transparent;
    box-shadow: none;
  }

  &.destructive {
    background: transparent;
    border: var(--p-border-width-1) solid var(--p-color-border-critical);
    box-shadow: none;
    color: var(--p-color-text-critical);

    svg {
      fill: var(--p-color-icon-critical);
    }

    &:hover {
      border: var(--p-border-width-1) solid var(--p-color-border-critical);
      background: var(--p-color-bg-critical-subdued);
    }

    &:focus-visible {
      border: var(--p-border-width-1) solid var(--p-color-border-critical);
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      @include focus-ring($style: 'focused');
    }

    &:active {
      border: var(--p-border-width-1) solid var(--p-color-border-critical);
      background: var(--p-color-bg-critical-subdued);
    }

    // stylelint-disable-next-line selector-max-class -- too many classes
    &.disabled {
      border: var(--p-border-width-1) solid var(--p-color-border-disabled);
      background: transparent;
      color: var(--p-color-text-disabled);
    }

    // stylelint-disable-next-line selector-max-class -- too many classes
    &.pressed {
      border: var(--p-border-width-1) solid var(--p-color-border-critical);
      background: var(--p-color-bg-critical-subdued);
      color: var(--p-color-text-critical);
    }
  }
}

.disabled {
  cursor: default;
  pointer-events: none;
}

.loading {
  position: relative;

  &,
  &:hover,
  &.disabled {
    color: transparent;
  }
}

.loading.disabled svg {
  fill: var(--p-color-icon-subdued);
}

// The way the designs work, we need to do lots of reaching down to
// target the content in pseudo-selectors, so we need higher specificity
// in this case.
// stylelint-disable selector-max-specificity, selector-max-class -- generated by polaris-migrator DO NOT COPY
.plain {
  // stylelint-disable-next-line -- polaris/conventions/polaris/custom-property-allowed-list
  margin: calc(-1 * var(--pc-button-vertical-padding))
    calc(-1 * var(--p-space-2));
  padding-left: var(--p-space-2);
  padding-right: var(--p-space-2);
  background: transparent;
  border: 0;
  box-shadow: none;
  color: var(--p-color-text-interactive);

  svg {
    fill: var(--p-color-icon-interactive);
  }

  > .Content {
    font-weight: var(--p-font-weight-regular);
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    @include focus-ring;
  }

  &:hover,
  &:focus:not(.disabled) {
    color: var(--p-color-text-interactive-hover);
    background: transparent;
    box-shadow: none;

    svg {
      fill: var(--p-color-icon-interactive-hover);
    }

    &:not(.removeUnderline) {
      text-decoration: underline;
    }
  }

  &.pressed,
  &:active {
    color: var(--p-color-text-interactive-active);
    background: transparent;
    box-shadow: none;

    svg {
      fill: var(--p-color-icon-interactive-active);
    }

    @media (-ms-high-contrast: active) {
      outline: none;
    }
  }

  &:focus-visible {
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    @include no-focus-ring;

    @media (-ms-high-contrast: active) {
      outline: none;
    }

    > .Content {
      @media (-ms-high-contrast: active) {
        outline: var(--p-border-width-2) dotted;
      }
    }
  }

  &:focus-visible:not(:active) {
    > .Content {
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      @include focus-ring($style: 'focused');
    }
  }

  &:active:not(.iconOnly) > .Content,
  &.pressed:not(.iconOnly) > .Content {
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    @include plain-button-backdrop;
  }

  &.fullWidth {
    margin-left: 0;
    margin-right: 0;
  }

  &.disabled {
    color: var(--p-color-text-disabled);
    background: none;

    &.loading {
      color: transparent;
    }
  }

  &.destructive {
    color: var(--p-color-text-critical);

    svg {
      fill: var(--p-color-icon-critical);
    }

    &:hover {
      color: var(--p-color-bg-critical-strong-hover);
    }

    &:active,
    &.pressed {
      color: var(--p-color-text-critical-active);
    }

    &.disabled {
      color: var(--p-color-text-disabled);
    }
  }

  &.sizeSlim {
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    margin-top: calc(-1 * var(--pc-button-slim-vertical-padding));
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    margin-bottom: calc(-1 * var(--pc-button-slim-vertical-padding));
  }

  &.sizeLarge {
    // stylelint-disable -- polaris/conventions/polaris/custom-property-allowed-list
    margin: calc(-1 * var(--pc-button-large-vertical-padding))
      calc(-1 * var(--p-space-5));
    // stylelint-enable -- polaris/conventions/polaris/custom-property-allowed-list
  }

  &.iconOnly {
    margin: calc(-1 * var(--p-space-2));

    svg {
      fill: var(--p-color-icon);
    }

    &:hover svg {
      fill: var(--p-color-icon-hover);
    }

    &:active svg,
    &.pressed svg {
      fill: var(--p-color-icon-active);
    }

    &.disabled svg {
      fill: var(--p-color-icon-disabled);
    }
  }

  &.destructive.iconOnly {
    svg {
      fill: var(--p-color-bg-critical-strong);
    }

    &:hover svg {
      fill: var(--p-color-bg-critical-strong-hover);
    }

    &:active svg,
    &.pressed svg {
      fill: var(--p-color-bg-critical-strong-active);
    }

    &.disabled svg {
      fill: var(--p-color-bg-disabled);
    }
  }

  .Icon {
    margin-left: 0;
    margin-right: 0;
  }
}

.fullWidth {
  display: flex;
  width: 100%;
}

.iconOnly {
  padding-left: var(--p-space-2);
  padding-right: var(--p-space-2);

  &.sizeLarge {
    padding-left: var(--p-space-3);
    padding-right: var(--p-space-3);
  }

  &.sizeSlim {
    padding-left: var(--p-space-1);
    padding-right: var(--p-space-1);
  }

  .Icon:first-child {
    margin-left: 0;
  }

  .Icon:last-child {
    margin-right: calc(-1 * var(--p-space-1));
  }

  .Icon:only-child {
    margin-right: 0;
  }
}

.sizeMicro {
  border-radius: var(--p-border-radius-1);
  padding: var(--p-space-1) var(--p-space-2);
  // stylelint-disable-next-line -- custom property
  min-height: var(--pc-button-micro-min-height);

  .Content {
    font-size: var(--p-font-size-100);
    font-weight: var(--p-font-weight-semibold);
    line-height: var(--p-font-line-height-2);
  }

  @media #{$p-breakpoints-md-up} {
    padding: var(--p-space-05) var(--p-space-2);

    .Content {
      font-size: var(--p-font-size-75);
      line-height: var(--p-font-line-height-1);
    }
  }
}

.sizeSlim {
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  min-height: var(--pc-button-slim-min-height);
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  padding: var(--pc-button-slim-vertical-padding) var(--p-space-3);
}

.sizeLarge {
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  min-height: var(--pc-button-large-min-height);
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  min-width: var(--pc-button-large-min-height);
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  padding: var(--pc-button-large-vertical-padding) var(--p-space-6);

  .Content {
    font-size: var(--p-font-size-200);
    font-weight: var(--p-font-weight-medium);
    line-height: var(--p-font-line-height-2);
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    text-transform: initial;
    letter-spacing: initial;
  }
}

// stylelint-disable selector-max-specificity -- generated by polaris-migrator DO NOT COPY
.monochrome {
  &.outline,
  &.plain {
    color: currentColor;

    svg {
      fill: currentColor;
    }

    &:hover,
    &:focus,
    &:active {
      color: currentColor;

      svg {
        fill: currentColor;
      }
    }

    // stylelint-disable selector-max-class -- generated by polaris-migrator DO NOT COPY
    &.disabled {
      color: currentColor;
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      opacity: 0.4;

      svg {
        fill: currentColor;
      }
    }

    // Prevents the loading spinner from overlapping the button’s text, while retaining its width.
    &.loading .Text {
      visibility: hidden;
    }

    &.iconOnly {
      svg {
        fill: currentColor;
      }

      &:focus svg,
      &:active svg {
        fill: currentColor;
      }

      &.disabled svg {
        fill: currentColor;
      }
    }
    // stylelint-enable selector-max-class
  }

  &.plain {
    // stylelint-disable selector-max-class -- generated by polaris-migrator DO NOT COPY
    .Text:not(.removeUnderline) {
      text-decoration: underline;
    }
    // stylelint-enable selector-max-class
  }

  &.outline {
    position: relative;
    border-color: currentColor;
    // stylelint-disable selector-max-class -- generated by polaris-migrator DO NOT COPY
    box-shadow: 0 0 0 var(--p-border-width-1) currentColor;
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    @include focus-ring($border-width: 2px);

    &::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: currentColor;
      opacity: 0;
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      z-index: 0;
    }

    &.pressed {
      background: transparent;
      box-shadow: none;
      color: currentColor;

      &::before {
        // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
        opacity: 0.2;
      }
    }

    &:hover,
    &:focus,
    &:active {
      background-color: transparent;
      border-color: currentColor;

      &::before {
        // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
        opacity: 0.07;
      }
    }

    &:focus-visible {
      box-shadow: 0 0 0 var(--p-border-width-1) currentColor;
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      @include focus-ring($style: 'focused');
    }

    &:active::after {
      box-shadow: none;
    }

    &:hover,
    &:active {
      &::before {
        // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
        opacity: 0.05;
      }
    }
    // stylelint-enable selector-max-class
  }
}
// stylelint-enable selector-max-specificity

.ConnectedDisclosureWrapper {
  display: flex;
}

.ConnectedDisclosure {
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  z-index: var(--pc-button-segment);
  margin-left: calc(-1 * var(--p-space-025));
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
  height: 100%;

  &:focus,
  &:active {
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    z-index: var(--pc-button-focused);
  }

  &.primary,
  &.destructive {
    margin-left: var(--p-space-025);

    // stylelint-disable-next-line selector-max-class -- generated by polaris-migrator DO NOT COPY
    &.outline {
      margin-left: 0;
      border-left: 0;
    }
  }

  &::after {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }
}
// stylelint-disable selector-max-combinators, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
[data-buttongroup-segmented='true'] {
  .Button,
  .Button::after {
    border-radius: 0;
  }

  > :first-child .Button,
  > :first-child .Button::after {
    border-radius: 0;
    border-top-left-radius: var(--p-border-radius-1);
    border-bottom-left-radius: var(--p-border-radius-1);
  }

  > :last-child .Button,
  > :last-child .Button::after {
    border-radius: 0;
    border-top-right-radius: var(--p-border-radius-1);
    border-bottom-right-radius: var(--p-border-radius-1);
  }

  > :last-child:first-child .Button,
  > :last-child:first-child .Button::after {
    border-radius: var(--p-border-radius-1);
  }
}

[data-buttongroup-connected-top='true'] {
  > :first-child .Button,
  > :first-child .Button::after {
    border-top-left-radius: 0;
  }

  > :last-child .Button,
  > :last-child .Button::after {
    border-top-right-radius: 0;
  }
}

[data-buttongroup-full-width='true'] {
  .Button {
    display: flex;
    width: 100%;
  }
}
// stylelint-enable selector-max-combinators, selector-max-specificity
