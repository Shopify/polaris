@import '../../styles/common';

.IndexTable {
  // stylelint-disable -- Polaris component custom properties
  --pc-index-table-translate-offset: 35px;
  --pc-index-table-table-header-offset: 36px;
  --pc-index-table-cell: 1;
  --pc-index-table-sticky-cell: 31;
  --pc-index-table-scroll-bar: 35;
  --pc-index-table-bulk-actions: 36;
  --pc-index-table-loading-panel: 37;
  // stylelint-enable
  position: relative;
  border-radius: inherit;
}

.IndexTableWrapper {
  border-radius: inherit;
}

.IndexTableWrapperWithBulkActions {
  // stylelint-disable-next-line -- Polaris component custom properties
  --pc-index-table-bulk-actions-offset: 92px;
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  padding-bottom: var(--pc-index-table-bulk-actions-offset);
  border-radius: 0;
}

.LoadingContainer-enter {
  opacity: 0;
  transform: translateY(-100%);
}

.LoadingContainer-enter-active {
  opacity: 1;
  transition: opacity var(--p-duration-100) var(--p-ease-out),
    transform var(--p-duration-100) var(--p-ease-out);
  transform: translateY(0);
}

.LoadingContainer-exit {
  opacity: 1;
  transform: translateY(0);
}

.LoadingContainer-exit-active {
  opacity: 0;
  transform: translateY(-100%);
  transition: opacity var(--p-duration-100) var(--p-ease-in),
    transform var(--p-duration-100) var(--p-ease-in);
}

$loading-panel-height: 53px;

.LoadingPanel {
  position: absolute;
  z-index: var(--p-z-index-2);
  top: 0;
  left: 0;
  display: flex;
  width: 100%;
  justify-content: center;
  align-items: center;
  background: var(--p-surface);
  padding: var(--p-space-2) var(--p-space-4);
  box-shadow: var(--p-shadow-md);

  .LoadingPanelRow {
    display: flex;
    flex-wrap: nowrap;
    width: 100%;
    background: var(--p-surface-highlight-subdued);
    padding: var(--p-space-2);
    padding-bottom: var(--p-space-1);
    border-radius: var(--p-border-radius-1);
  }
}

.LoadingPanelText {
  margin-left: var(--p-space-3);
  color: var(--p-text);
}

.Table {
  width: 100%;
  min-width: 100%;
  border-collapse: collapse;
}

.Table-scrolling {
  // stylelint-disable-next-line selector-max-class, selector-max-combinators -- generated by polaris-migrator DO NOT COPY
  .TableCell-first,
  .TableCell-first + .TableCell,
  .TableHeading-first,
  .TableHeading-second {
    visibility: visible;
    background-color: var(--p-surface);
  }

  .TableCell-first,
  .TableHeading-first {
    filter: drop-shadow(1px 0 0 var(--p-divider));
  }

  &.Table-sticky {
    // stylelint-disable-next-line selector-max-class, selector-max-combinators, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
    .TableCell-first + .TableCell,
    .TableHeading-second {
      @media #{$p-breakpoints-sm-up} {
        filter: drop-shadow(1px 0 0 var(--p-divider));
      }
    }

    // stylelint-disable-next-line selector-max-class -- generated by polaris-migrator DO NOT COPY
    &.Table-unselectable {
      // stylelint-disable-next-line selector-max-class, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
      .TableHeading-second,
      .TableCell:first-child {
        filter: drop-shadow(1px 0 0 var(--p-divider));
      }
    }
  }

  &.Table-unselectable {
    // stylelint-disable-next-line selector-max-class, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
    .TableHeading-second,
    .TableCell:first-child {
      visibility: visible;
    }
  }
}

.TableRow {
  background-color: var(--p-surface);
  cursor: pointer;
  border-top: var(--p-border-width-1) solid var(--p-divider);

  &.TableRow-unclickable {
    cursor: auto;
  }

  &.statusSuccess {
    // stylelint-disable-next-line selector-max-combinators, selector-max-class, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
    &,
    .TableCell-first,
    .TableCell-first + .TableCell {
      background-color: var(--p-surface-primary-selected);
    }
  }

  &.statusSubdued {
    // stylelint-disable-next-line selector-max-combinators, selector-max-class, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
    &,
    .TableCell-first,
    .TableCell-first + .TableCell {
      background-color: var(--p-surface-subdued);
    }
  }

  &.TableRow-hovered {
    // stylelint-disable-next-line selector-max-class, selector-max-combinators, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
    &,
    .TableCell-first,
    .TableCell-first + .TableCell {
      background-color: var(--p-surface-hovered);
    }
  }

  &.TableRow-selected {
    // stylelint-disable-next-line selector-max-class, selector-max-combinators, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
    &,
    .TableHeading-first,
    .TableHeading-second,
    .TableCell-first,
    .TableCell-first + .TableCell {
      background-color: var(--p-surface-selected);
    }
  }

  // stylelint-disable-next-line selector-max-class -- generated by polaris-migrator DO NOT COPY
  &.TableRow-hovered.TableRow-selected {
    // stylelint-disable-next-line selector-max-class, selector-max-combinators, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
    &,
    .TableCell-first,
    .TableCell-first + .TableCell {
      background-color: var(--p-surface-selected-hovered);
    }
  }
}

.TableRow-subdued {
  color: var(--p-text-subdued);
}

.TableRow-disabled {
  cursor: default;
  color: var(--p-text-subdued);
}

// Extra specificity is needed to address edge cases where the zebra striping is combined with other options
// stylelint-disable selector-max-specificity, selector-max-class, selector-max-combinators -- extra specificity needed for when combining props
.ZebraStriping {
  .TableRow:nth-child(2n + 1) {
    background: none;
  }

  .TableRow:nth-child(2n),
  .TableRow:nth-child(2n) .TableCell:first-child,
  .TableRow:nth-child(2n) .TableCell:last-child {
    background: var(--p-surface-subdued);

    &:hover {
      background-color: var(--p-surface-hovered);
    }
  }

  .TableRow-hovered:nth-child(2n + 1),
  .TableRow-hovered:nth-child(2n),
  .TableRow-hovered:nth-child(2n) .TableCell:first-child,
  .TableRow-hovered:nth-child(2n) .TableCell:last-child {
    background-color: var(--p-surface-hovered);
  }
}
// stylelint-enable selector-max-specificity, selector-max-class, selector-max-combinators

.TableHeading {
  background: var(--p-surface-subdued);
  z-index: var(--p-z-index-1);
  padding: var(--p-space-2) var(--p-space-4);
  text-align: left;
  font-weight: var(--p-font-weight-medium);
  color: var(--p-text-subdued);
  font-size: var(--p-font-size-75);
  white-space: nowrap;
  border: 0;
}

.TableHeading-align-center {
  text-align: center;

  [class*='TooltipContainer'] {
    justify-content: center;
  }
}

.TableHeading-align-end {
  text-align: right;

  [class*='TooltipContainer'] {
    justify-content: end;
  }
}

.TableHeading-sortable {
  background: var(--p-surface-subdued);
}

.TableHeading-flush {
  padding: 0;
}

.TableHeading-first {
  // stylelint-disable -- Polaris component custom properties
  --pc-index-table-checkbox-offset-left: 16px;
  --pc-index-table-checkbox-offset-right: 18px;
  // stylelint-enable
  position: sticky;
  left: 0;
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  padding-left: var(--pc-index-table-checkbox-offset-left);
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  padding-right: var(--pc-index-table-checkbox-offset-right);
  width: var(--p-space-5);
}

.TableHeadingSortButton {
  position: relative;
  background: none;
  padding: 0;
  border: 0;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: var(--p-font-weight-medium);
  color: var(--p-text-subdued);
  font-size: var(--p-font-size-75);

  &:hover,
  &:focus {
    .TableHeadingSortIcon {
      opacity: 1;
    }
  }
}

.TableHeadingSortButton-heading-align-end {
  transform: translateX(var(--p-space-5));
  transition-delay: var(--p-duration-50);

  &:hover,
  &:focus {
    transition-delay: none;
    transform: translateX(var(--p-space-1));
  }
}

/* expands button area to retain hover after button slides to the left */
.TableHeadingSortButton-heading-align-end:hover::before {
  content: '';
  position: absolute;
  top: 0;
  left: calc(100% - var(--p-space-2));
  height: 100%;
  width: var(--p-space-6);
  display: block;
  animation: none;
  transition: none;
}

.TableHeadingSortButton-heading-align-end-currently-sorted {
  transform: translateX(var(--p-space-1));

  .TableHeadingSortIcon-heading-align-end {
    animation: none;
  }
}

.TableHeadingSortButton-heading-align-end-previously-sorted {
  animation: right-aligned-sort-button-slide-out var(--p-duration-50)
    var(--p-ease);
}

.TableHeadingSortIcon {
  order: 1;
  opacity: 0;
  height: var(--p-space-5);
  width: var(--p-space-5);

  &:not(.TableHeadingSortIcon-heading-align-end:hover),
  &:not(.TableHeadingSortButton-heading-align-end-previously-sorted) {
    transition: opacity var(--p-duration-50) var(--p-ease);
  }
}

.TableHeadingSortButton:hover {
  .TableHeadingSortIcon-heading-align-end {
    animation: reveal-right-aligned-sort-button-icon var(--p-duration-200)
      var(--p-ease);
  }
}

.TableHeadingSortButton-heading-align-end-currently-sorted:hover {
  .TableHeadingSortIcon-heading-align-end {
    animation: none;
  }
}

.TableHeadingUnderline {
  border-bottom: var(--p-border-width-2) dotted var(--p-border-subdued);
}

.TableHeadingTooltipUnderlinePlaceholder {
  border-bottom: var(--p-border-width-2) dotted transparent;
}

.TableHeadingSortIcon-visible {
  opacity: 1;
}

.TableHeadingSortSvg {
  display: block;
  width: 100%;
  max-width: 100%;
  max-height: 100%;
}

.SortableTableHeadingWithCustomMarkup {
  display: flex;
  flex-wrap: nowrap;
}

.SortableTableHeaderWrapper {
  cursor: pointer;
}

.ColumnHeaderCheckboxWrapper {
  display: flex;
}

.FirstStickyHeaderElement {
  padding-right: var(--p-space-05);
}

.TableHeading-second:not(.TableHeading-unselectable) {
  padding-left: 0;
}

.TableCell {
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  z-index: var(--pc-index-table-cell);
  text-align: left;
  padding: var(--p-space-2) var(--p-space-4);
  white-space: nowrap;
}

.TableCell-flush {
  padding: 0;
}

.TableCell-first {
  position: sticky;
  left: 0;
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  z-index: var(--pc-index-table-sticky-cell);
  padding: var(--p-space-2) 0;
  vertical-align: middle;
}

.TableCell-first + .TableCell {
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  left: var(--pc-checkbox-offset);
  padding-left: 0;
}

.Table-sticky {
  // stylelint-disable-next-line selector-max-combinators, selector-max-class -- generated by polaris-migrator DO NOT COPY
  .TableCell-first + .TableCell {
    @media #{$p-breakpoints-sm-up} {
      position: sticky;
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      z-index: var(--pc-index-table-sticky-cell);
    }
  }

  .TableHeading-second {
    &:not(.TableHeading-unselectable) {
      @media #{$p-breakpoints-sm-up} {
        position: sticky;
        left: 0;
      }
    }
    // stylelint-disable-next-line selector-max-class -- generated by polaris-migrator DO NOT COPY
    &.TableHeading-unselectable {
      position: sticky;
      left: 0;
    }
  }
}

.Table-unselectable {
  // stylelint-disable-next-line selector-max-class, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
  &.Table-sticky .TableCell:first-child {
    left: 0;
    background-color: var(--p-surface);
    // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
    z-index: var(--pc-index-table-sticky-cell);
    position: sticky;
  }

  .statusSuccess {
    // stylelint-disable-next-line selector-max-combinators, selector-max-class, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
    .TableCell:first-child {
      background-color: var(--p-surface-primary-selected);
    }
  }

  .statusSubdued {
    // stylelint-disable-next-line selector-max-combinators, selector-max-class, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
    .TableCell:first-child {
      background-color: var(--p-surface-subdued);
    }
  }

  .TableRow-hovered {
    // stylelint-disable-next-line selector-max-combinators, selector-max-class, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
    .TableCell:first-child {
      background-color: var(--p-surface-hovered);
    }
  }
}

.Table-sticky-scrolling {
  .TableCell:last-child,
  .TableHeading-last {
    @media #{$p-breakpoints-sm-up} {
      filter: drop-shadow(-1px 0 0 var(--p-divider));
    }
  }
}

.Table-sticky-last {
  .TableCell:last-child {
    @media #{$p-breakpoints-sm-up} {
      position: sticky;
      right: 0;
      background-color: var(--p-surface);
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      z-index: var(--pc-index-table-sticky-cell);
    }
  }

  .TableHeading-last {
    @media #{$p-breakpoints-sm-up} {
      position: sticky;
      right: 0;
      background-color: var(--p-surface);
      // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
      z-index: auto;
    }
  }

  // stylelint-disable selector-max-class, selector-max-combinators, selector-max-specificity -- generated by polaris-migrator DO NOT COPY
  .statusSuccess {
    .TableCell:last-child {
      background-color: var(--p-surface-primary-selected);
    }
  }

  .statusSubdued {
    .TableCell:last-child {
      background-color: var(--p-surface-subdued);
    }
  }

  .TableRow-hovered {
    .TableCell:last-child {
      background-color: var(--p-surface-hovered);
    }
  }

  .TableRow-selected {
    .TableCell:last-child {
      background-color: var(--p-surface-selected);
    }
  }
}

.Table-sortable {
  .TableHeading {
    background-color: var(--p-surface-subdued);
  }
}

.StickyTable {
  position: relative;
  top: 0;
  left: 0;
  right: 0;
  visibility: hidden;
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  z-index: var(--pc-index-table-loading-panel);
}

.StickyTableHeader {
  position: absolute;
  display: flex;
  width: 100%;

  &:not(.StickyTableHeader-isSticky) {
    top: -1000px;
    left: -1000px;
  }
}

.StickyTableColumnHeader {
  flex: 0 0 auto;
}

.StickyTableHeadings {
  overflow: hidden;
  flex: 1 1 auto;
  display: flex;
}

.StickyTableHeading-second {
  padding-left: 0;

  @media #{$p-breakpoints-sm-up} {
    display: none;
  }

  &.unselectable {
    display: none;
  }
}

.StickyTableHeading-second-scrolling {
  padding: 0 var(--p-space-025) 0 var(--p-space-4);
  display: none;

  @media #{$p-breakpoints-sm-up} {
    display: block;
  }
}

.StickyTableHeader-isSticky {
  visibility: visible;
  background-color: var(--p-surface);
  box-shadow: var(--p-shadow-md);
}

.IndexTable:hover {
  .ScrollLeft {
    display: block;
  }

  .ScrollRight {
    display: block;
  }
}

.IndexTable .ScrollRight-onboarding {
  display: block;
}

.BulkActionsWrapper {
  visibility: visible;
  position: absolute;
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  z-index: var(--pc-index-table-bulk-actions);
  left: 0;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: var(--p-space-4);
  pointer-events: none;
}

.BulkActionsWrapperSticky {
  position: fixed;
  top: auto;
  bottom: calc(var(--p-space-10) - var(--p-space-1));
}

.SelectAllActionsWrapper {
  visibility: visible;
  position: relative;
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  z-index: var(--pc-index-table-bulk-actions);
  top: 0;
  left: 0;
  right: 0;
  padding: 0 var(--p-space-2) 0 var(--p-space-4);
  background: var(--p-surface);
  border-radius: var(--p-border-radius-2);

  &.StickyTableHeader-condensed {
    padding-top: calc(var(--p-space-2) + var(--p-space-05));
  }
}

$scroll-bar-size: var(--p-space-2);

.ScrollBarContainer {
  position: sticky;
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  z-index: var(--pc-index-table-scroll-bar);
  bottom: 0;
  padding: var(--p-space-05);
  background-color: var(--p-surface);
  border-bottom-right-radius: var(--p-border-radius-2);
  border-bottom-left-radius: var(--p-border-radius-2);
}

.scrollBarContainerCondensed {
  visibility: hidden;
  pointer-events: none;
}

.scrollBarContainerHidden {
  height: 0;
  padding: 0;
}

.ScrollBar {
  overflow-x: scroll;
  width: 100%;
  margin: 0;
  padding: 0;
}

.ScrollBar::-webkit-scrollbar-track {
  border-radius: var(--p-border-radius-1);
  background-color: transparent;
}

.ScrollBar::-webkit-scrollbar {
  appearance: none;
  height: $scroll-bar-size;
  width: $scroll-bar-size;
  background-color: transparent;
}

.ScrollBar::-webkit-scrollbar-thumb {
  border-radius: var(--p-border-radius-1);
  background-color: var(--p-border-neutral-subdued);
  transition: background-color var(--p-duration-100) var(--p-ease-out);
}

.ScrollBar:hover::-webkit-scrollbar-thumb {
  background-color: var(--p-border-depressed);
}

.disableTextSelection {
  user-select: none;
}

.selectMode {
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  transform: translateY(calc(-1 * var(--pc-index-table-table-header-offset)));
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  margin-bottom: calc(-1 * var(--pc-index-table-table-header-offset));
}

.EmptySearchResultWrapper {
  padding: var(--p-space-4);
}

.condensedRow {
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  width: calc(100% + var(--pc-index-table-translate-offset));
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  transform: translateX(calc(-1 * var(--pc-index-table-translate-offset)));
  transition: transform var(--p-ease) var(--p-duration-200);
  display: flex;
  border-top: var(--p-border-divider);
  filter: none;
  align-items: center;
}

[data-selectmode='true'] {
  .condensedRow {
    transform: none;
  }
}

.CondensedList {
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.HeaderWrapper {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
  min-height: 56px;
  padding: var(--p-space-2) var(--p-space-4);
  background-color: var(--p-surface);

  &.unselectable {
    min-height: auto;
    padding: 0;
  }
}

.StickyTable-condensed {
  visibility: visible;
}

.StickyTableHeader-condensed {
  padding: var(--p-space-4) var(--p-space-4) var(--p-space-2);
}

.ScrollBarContent {
  height: 1px;
  // stylelint-disable-next-line -- generated by polaris-migrator DO NOT COPY
  width: var(--pc-index-table-scroll-bar-content-width);
}

/* stylelint-disable-next-line polaris/motion/at-rule-disallowed-list -- custom reset animation for right-aligned header */
@keyframes right-aligned-sort-button-slide-out {
  0% {
    transform: translateX(var(--p-space-1));
  }

  80% {
    transform: translateX(var(--p-space-1));
  }

  100% {
    transform: translateX(var(--p-space-5));
  }
}

/* stylelint-disable-next-line polaris/motion/at-rule-disallowed-list -- custom animation for right-aligned header */
@keyframes reveal-right-aligned-sort-button-icon {
  0% {
    transform: translateX(calc(var(--p-space-5) * -1));
    opacity: 0;
  }

  40% {
    opacity: 0;
  }

  50% {
    transform: translateX(0);
  }

  100% {
    opacity: 1;
  }
}
