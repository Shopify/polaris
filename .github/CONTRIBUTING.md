# How to contribute

Polaris React is Shopify‚Äôs most active open source project. It‚Äôs the only project that‚Äôs both under very active development and is used to build Shopify and Shopify apps every day. We want to make it as easy and transparent as possible to contribute. If we are missing anything or can make the process easier in any way, [please let us know](mailto:polaris@shopify.com).

## Code of conduct

We expect all participants to read our [code of conduct](https://github.com/Shopify/polaris/blob/main/.github/CODE_OF_CONDUCT.md) to understand which actions are and aren‚Äôt tolerated.

## Open development

All work on Polaris React happens directly on GitHub. Both team members and external contributors send pull requests which go through the same review process.

## Semantic versioning

Polaris packages follow semantic versioning. We release [patch versions for bug fixes](https://github.com/Shopify/polaris/blob/.github/CONTRIBUTING.md#patch), [minor versions for new features](https://github.com/Shopify/polaris/blob/.github/CONTRIBUTING.md#minor), and [major versions for breaking changes](https://github.com/Shopify/polaris/blob/.github/CONTRIBUTING.md#major). When we make breaking changes, we introduce deprecation warnings in a minor version along with the upgrade path so that our users learn about the upcoming changes and migrate their code in advance.

The following sections detail what kinds of changes result in each of major, minor, and patch version bumps:

### Major

- Removal of a component
- Removal of a prop from a component
- Change to the type accepted for a prop
- Breaking changes to minimum version of dependencies
- Breaking changes to public Sass variables, functions and mixins

### Minor

- New component
- New prop for a component
- Additional type accepted for a prop
- Deprecation of a component, prop, public Sass variable, function, or mixin (ahead of its removal in the next major version)

### Patch

- Breaking change to the HTML generated by a component, including addition, removal, or renaming of classes
- Changes that do not impact public APIs
- Non-breaking changes to minimum version of dependencies
- Breaking changes to private Sass variables, functions, and mixins

## Branch organization

We do our best to keep `main` releasable at all times, with work for major releases happening in separate branches. [Breaking changes](https://github.com/Shopify/polaris/blob/main/.github/CONTRIBUTING.md#major) should never be merged directly to `main`. Otherwise, if you send a pull request please do it against the `main` branch. Continue reading for more about pull requests and breaking changes.

## Bugs

### Where to find known issues

We track all of our issues in GitHub and [bugs](https://github.com/Shopify/polaris/labels/Bug) are labeled accordingly. If you are planning to work on an issue, avoid ones which already have an assignee or where someone has commented within the last two weeks they are working on it. We will do our best to communicate when an issue is being worked on internally.

### Reporting new issues

To reduce duplicates, look through open issues before filing one. When [opening an issue](https://github.com/Shopify/polaris/issues/new?template=ISSUE.md), complete as much of the template as possible. The best way to get your bug fixed is to provide a reduced test case. [This CodeSandbox template](https://codesandbox.io/s/q82mlq0m26) is a great starting point.

## Feature requests

Before requesting a feature, search the [existing feature requests](https://github.com/Shopify/polaris/issues?utf8=%E2%9C%93&q=is%3Aissue+label%3A%22feature+request%22+sort%3Areactions-%2B1-desc). You can [üëç upvote](https://help.github.com/articles/about-conversations-on-github/) feature requests to help the Polaris team set priorities. If a feature request is closed, you can still upvote! A closed feature request means it‚Äôs not something we‚Äôre currently working on, but we take all your input into account when planning what to work on next.

Otherwise, [request a feature](https://github.com/Shopify/polaris/issues/new?template=FEATURE_REQUEST.md).

## Proposing a change

If you intend to build a new component, change a public API, make design improvements, or any other non-trivial changes, [we recommend filing an issue](https://github.com/Shopify/polaris/issues/new?template=FEATURE_REQUEST.md). This lets us all discuss and reach an agreement on the proposal before you put in significant time and effort.

Please use this [template for proposing new components or changes to existing components](https://github.com/Shopify/polaris/issues/new?template=NEW_COMPONENT.md).

If you‚Äôre only fixing a bug, it‚Äôs okay to submit a pull request right away but we still recommend you file an issue detailing what you‚Äôre fixing. This is helpful in case we don‚Äôt accept that specific fix but want to keep track of the issue.

## Your first pull request

Working on your first pull request? You can learn how from this free video series:

[How to Contribute to an Open Source Project on GitHub](https://egghead.io/courses/how-to-contribute-to-an-open-source-project-on-github)

To help you get familiar with our contribution process, we have a list of [good first issues](https://github.com/Shopify/polaris/labels/good%20first%20issue) that contain bugs with limited scope. This is a great place to get started.

If you decide to fix an issue, please check the comment thread in case somebody is already working on a fix. If nobody is working on it, leave a comment stating that you intend to work on it.

If somebody claims an issue but doesn‚Äôt follow up for more than two weeks, it‚Äôs fine to take it over but still leave a comment stating that you intend to work on it.

### Sending a pull request

We‚Äôll review your pull request and either merge it, request changes to it, or close it with an explanation. We‚Äôll do our best to provide updates and feedback throughout the process.

**Before submitting a pull request**, please:

1. Fork the repository and create your branch from `main`
1. Run `pnpm install` in the repository root
1. If you‚Äôve fixed a bug or added code, make sure to add tests
1. Ensure the test suite passes with `pnpm test` (protip: `pnpm test:watch TestName` is helpful in development)
1. Format your code with `pnpm format`
1. Make sure your code lints with `pnpm lint`
1. Run the TypeScript compiler with `pnpm type-check`
1. [Tophat üé©](https://github.com/Shopify/polaris/blob/main/documentation/Tophatting.md) your changes locally in Storybook with `pnpm dev`
1. Create a changeset by running `pnpm changeset`. [More info](https://github.com/Shopify/polaris/blob/main/.github/CONTRIBUTING.md#adding-a-changeset).
1. If you haven‚Äôt already, [sign a CLA](https://cla.shopify.com/)

### Changelog

The changelog is created with [Changesets](https://github.com/changesets/changesets).

#### Adding a changeset

A changeset describes changes made in a branch or commit. It holds three bits of information:

- What packages we need to release
- What version we are releasing packages
- A changelog entry for the released packages

Add a changeset if you have made any changes that will require a package version bump and release:

1. Run `pnpm changeset`.
2. Select the packages you want to include using ‚Üë and ‚Üì to navigate to packages, and space to select a package. Hit enter when all desired packages are selected.
3. Select a [bump type](https://github.com/Shopify/polaris/blob/main/.github/CONTRIBUTING.md#semantic-versioning) for each selected package.
4. Provide a message to be written into the changelog on the next release.

#### Writing a changelog message

Keep the following in mind when authoring your changelog entry (final prompt after running `pnpm changeset`):

- Use a positive, conversational tone (for example, use ‚Äúsupport‚Äù over ‚Äúallow‚Äù and other authoritative verbs)
- Avoid redundancy when possible (try to phrase a bug fix entry without the word ‚Äúbug‚Äù)
- Use sentence case
- Use plain language

#### Out of scope for the changelog

Generally, changes related to these topics can be omitted:

- polaris.shopify.com
- Dev dependencies upgrades
- Chores (infrastructure, release process‚Ä¶)

### Contributor License Agreement (CLA)

Each contributor is required to [sign a CLA](https://cla.shopify.com/). This process is automated as part of your first pull request and is only required once. If any contributor has not signed or does not have an associated GitHub account, the CLA check will fail and the pull request is unable to be merged.

### Contribution prerequisites

- You have Node installed at v18.12.0+ and Yarn at v1.22.18+

### Best practices

Use the [documentation directory](https://github.com/Shopify/polaris/tree/main/documentation) for guidance on: [accessibility testing](https://github.com/Shopify/polaris/blob/main/documentation/Accessibility%20testing.md) and [adding to the changelog](https://github.com/Shopify/polaris/blob/main/.github/CONTRIBUTING.md#adding-a-changeset). For code style best practices, take a look at existing components.

Making sure the voice and tone is consistent across Polaris is important to us, for more information visit the [voice and tone guidelines](https://polaris.shopify.com/content/voice-and-tone).

### Development workflow

See the [README.md file](https://github.com/Shopify/polaris/blob/main/README.md#commands) for documentation on the development workflow.

#### Testing

We recommend running tests as well as trying your build of a package in a real project, to make sure you don‚Äôt introduce any regressions as you work on your change.

- `pnpm test` will run tests for all packages
- `pnpm turbo run test --filter="[HEAD^1]"` will test any package that has changed in the last commit

You can test your changes in another project locally by creating a [snapshot release](https://github.com/Shopify/polaris/blob/main/documentation/Releasing.md#snapshot-release).

On your feature branch PR, ensure you have a [changeset](https://github.com/Shopify/polaris/blob/main/.github/CONTRIBUTING.md#adding-a-changeset) indicating which package or packages to version. Then, create a new comment in your feature branch PR with the text "/snapit". This will kickoff a snapshot release to npm.

Once the snapshot is ready, there will be a new comment in your feature PR with the newly released versions. In your external project, add the snapshot package or packages. An example snapshot package should have the following format:

```sh
yarn add @shopify/polaris@0.0.0-snapshot-release-20220525184558
```

Run the project as usual to tophat local changes. If you need to make updates, push new package changes to your feature PR and create a new snapshot release.

### Code style

We use an automatic code formatter called [Prettier](https://prettier.io/). Run `pnpm format` after making any changes to the code.

Linting will catch common issues that may exist in your code. You can check the status of your code styling by running `pnpm lint`.

Our code editor of choice is [VS Code](https://code.visualstudio.com/) which has [integrations with Prettier](https://github.com/prettier/prettier-vscode) and our linting tools which make this automatic. If you choose to use VS Code, these integrations will be listed as recommended extensions (or search for `@recommended`) in the extensions panel.

However, there are still some styles that the linter cannot pick up. If you are unsure about something, looking at [our JavaScript](https://github.com/Shopify/javascript) and [CSS](https://github.com/Shopify/css) guides may help.

## Breaking changes

If your pull request contains breaking changes, please target the `next` branch for the next major release. Also, open a pull request against `main` that introduces the deprecation warnings and upgrade path.

If you are unsure if the changes are considered breaking or not, open your pull request against the `main` branch and let us know. We understand it can be uncomfortable asking for help and this is why we have a [code of conduct](https://github.com/Shopify/polaris/blob/main/.github/CODE_OF_CONDUCT.md) to ensure the community is positive, encouraging, and helpful.
